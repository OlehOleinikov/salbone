Математична модель
==============================

Задача оптимізації полягає у мінімізації функції суми добутків усіх індексів робочих місць та їх статусу включення у роботу (виражений у бінарній змінній :math:`y_j`), які входять у межі теоретично мінімальної та максимальної кількості станцій. Такий підхід (на відміну простого підрахунку кількості станції, що включені в роботу), створює обмеження, яким забезпечується послідовне включення робочих станцій від першої до останньої (максимально можливої при відомій кількості задач).

.. math::

    \min{\sum_{j=m_{\mathrm{min}}+1}^{m_{\mathrm{max}}}j}\cdot y_j

Індекси
--------

- :math:`i` – індекс операції (задачі)
- :math:`j` – індекс робочої станції (робочого місця)
- :math:`k` – індекс операції, яка має передувати поточній відповідно графу послідовності виконання операцій

Параметри
----------

- :math:`n` – кількість операцій (задач)
- :math:`m_{\mathrm{max}}` – максимальна кількість станцій
- :math:`m_{\mathrm{min}}` – мінімальна кількість станцій
- :math:`t_i` – ціна (тривалість) виконуваної операції (задачі)
- :math:`T` – час виробничого циклу (максимальна тривалість роботи однієї станції)

Множини
--------

- :math:`E_i` – мінімально можливий порядковий номер станції до якого може бути присвоєна задача :math:`i`
- :math:`L_i` – максимально можливий порядковий номер станції до якого може бути присвоєна задача :math:`i`
- :math:`ST_i` – множина завдань, які слідують за задачею :math:`i` (відповідно графу обмежень послідовностей виконання задач)
- :math:`PT_i` – множина завдань, які передують задачі :math:`i` (відповідно графу обмежень послідовностей виконання задач)
- :math:`P_{ik}` – множина безпосередньої залежності порядку виконання, де :math:`i` – номер операції, :math:`k` – номер операції, від завершення якої залежить чи можна розпочинати виконання задачі :math:`i`

Змінні оптимізації
-------------------

- :math:`x_{ij}` – статус присвоєння операції :math:`i` для робочої станції :math:`j`
- :math:`y_j` – статус увімкнення станції :math:`j`


Визначення та обмеження
-----------------------

Кількість задач – натуральні числа:


.. math::

    n \in \mathbb{N}

За максимально можливу кількість робочих станцій взято загальну кількість операцій (найгірший можливий варіант):

.. math::

    m_{\mathrm{max}} = n

За мінімально можливу кількість робочих станцій взято мінімальну кількість станцій, які забезпечать виконання всіх операцій (сума часу всіх операцій розділена на кількість циклу та округлена до більшого цілого значення):

.. math::

    m_{\mathrm{min}} = \left\lceil\frac{\sum_{i=1}^{n}t_i}{T}\right\rceil

Закріплення робочого місця за певною операцією викликає необхідність використання бінарної змінної:

.. math::

    x_{ij} \in \{0,1\} \quad \forall i=1,2,\ldots,n, \; \forall j=1,2,\ldots,m_{\mathrm{max}}

Також бінарною змінною забезпечується відображення у моделі факту «увімкнення» робочого місця:

.. math::

    y_j \in \{0,1\} \quad \forall j=1,2,\ldots,m_{\mathrm{max}}

Для забезпечення дотримання обмежень графу послідовностей виконання завдань вводиться матриця залежностей операцій:

.. math::

    P_{ik} \in \{0,1\}, \quad i,k \in \{1,2,\ldots,n\}

Для адаптації умови задачі до необхідних початкових параметрів моделі вводиться множини, які для кожної :math:`i` операції визначають перелік операцій, що мають передувати їй або які залежать від закінчення цієї операції:

.. math::

    ST_i \subseteq \{1,2,\ldots,n\}

    PT_i \subseteq \{1,2,\ldots,n\}

Для розрахунку мінімально та максимально можливого робочого місця до якого може бути закріплена операція сформовано вирази:

.. math::

    E_i = \left\lceil\frac{t_i + \sum_{k \in PT_i} t_k}{T}\right\rceil

    L_i = m_{\mathrm{max}} + 1 - \left\lceil\frac{t_i + \sum_{k \in ST_i} t_k}{T}\right\rceil

Для дотримання умов закріплення кожної окремої задачі тільки до однієї робочої станції вводиться обмеження:

.. math::

    \sum_{j=E_i}^{L_i} x_{ij} = 1 \quad \forall i=1,2,\ldots,n

Вводиться обмеження на загальний час, який може бути використаний на кожному окремому робочому місці:

.. math::

    \sum_{j \in \left[E_i, L_i\right] \land j \le m_{\mathrm{min}}} t_i \cdot x_{ij} \le T \quad \forall i

.. math::

    \sum_{j \in \left[E_i, L_i\right] \land j > m_{\mathrm{min}}} t_i \cdot x_{ij} \le T \cdot y_j \quad \forall i

Для забезпечення правильної послідовності операцій вводиться обмеження у якому використовується послідовний індекс робочої станції та факт «увімкнення» станції:

.. math::

    \sum_{j=E_i}^{L_i} j \cdot x_{ij} \le \sum_{j=E_k}^{L_k} j \cdot x_{kj} \quad \forall (i,k) \in P

Обов'язковість увімкнення станцій:

.. math::

    x_{i, L_i - q} \le y_{m_{\mathrm{max}} - q} \quad \forall i; \; q=0,\ldots,m_{\mathrm{max}} - m_{\mathrm{min}} - 1

Інші обмеження, що уточнюють концепцію математичної моделі:

Обмеження, яке визначає обов’язковим закріплення робочого місця за завданням у відповідності до відомих максимальних та мінімальних індексів робочого місця. Множення статусу «увімкнення» на індекс робочого місця також зменшує ймовірність призначення одного завдання до декількох робочих станцій:

.. math::

    E_i \le \sum_{j=1}^{m_{\mathrm{max}}} j \cdot x_{ij} \le L_i \quad \forall i=1,2,\ldots,n

Обмеження, щодо вимог дотримання кількості увімкнених робочих станцій в інтервалі, який встановлений, як можливий (вихід за ці значення свідчить про помилку у вирішенні):

.. math::

    m_{\mathrm{min}} \le \sum_{j=1}^{m_{\mathrm{max}}} y_j \le m_{\mathrm{max}}
